<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>ミニ掲示板</title>
    <link type="text/css" href="./css/style.css" rel="stylesheet">
    <script>
      function init() {
        var id = localStorage.getItem('id'); // ローカルストレージからidを習得する。
        if(id == null) {
          // idが取得できなければログインページへ移動する。
          location.href = './login';
        }
        // idが取得できたら画面へ表示する。
        document.querySelector('#id').textContent = 'ID: ' + id;
        document.querySelector('#id_input').value = id;
      }
    </script>
  </head>
  <body onload="init();">
    <head><h1>掲示板</h1></head>
    <div role="main">
      <p>※メッセージは最大10個まで保管されます。</p>
      <form method="post" action="/">
        <p>
          <span id="id"></span>
          <input type="hidden" id="id_input" name="id" value="">
          <p>
            <input type="text" name="msg">
            <input type="submit" value="送信">
          </p>
        </p>
      </form>
      <hr>
      <p>
        <table style="width: 85%;">
          <% for(var i in data) { %>
            <%- include('data_item', {val: data[i]}) %>
          <% } %>
        </table>
      </p>
    </div>
  </body>
</html>